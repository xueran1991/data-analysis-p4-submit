# data-analysis-p4-submit 第二次提交
# data-analysis-p4-submit
## 第一次提交的审阅
Requires Changes
还需满足 2 个要求 变化
终于来到最后一个项目，想必过程中也经历了一番曲折吧！
统计学和前几个项目直接处理数据不太一样，更加注重思辨过程，这也是数据分析师的必备内功之一。
因此无需过于匆忙，只有打下扎实的基础，将来路上才能走得更加平稳哦~

代码质量
所有代码都可以运行而不会出错。

使用文档字符串，注释和变量名称，让代码具有可读性。

第 I 部分 “1e. new_page 与 treatment 不一致的次数"，同学的代码很不错~

另外提供一个首先转换成布尔值，再对布尔值（隐性转换成整数）求和的方法，供你参考：

treatment = df['group'] == 'treatment'
new_page  = df['landing_page'] == 'new_page'
mismatch  = treatment != new_page
mismatch.sum()
然后通过使用布尔值作为索引，接下来创建 df2 时也会非常简单：

df2 = df[~mismatch].copy() # 使用 ~mismatch 排除 mismatch 的各行
统计分析
来自不同分析的所有结果都得到了正确解读。

需要修改（一）：
第 I 部分 4e. 题：

很好，control 组转化率确实比 treatment组更高~
然而差异幅度其实并不是很大…

另外即使样本存在表面上的差异，
在实施更加严谨的统计检验之前，
也不太好得出 “哪种页面可以带来更多的转化” 的结论哦~

需要修改（二）：
第 III 部分 e 题：

很好，ab_page 变量对应的 p 值确实是 0.19。
而且 0.19 确实和第 II 部分计算的 0.18988337448195103 是几乎一样的~

那题目为什么要问 “两处 p 值为何不同”？（为什么它与你在 II 中发现的结果不同？）

这是因为第 II 部分错误使用了 “双尾检验”，
导致两处检验的方向性相同了…
如果第 II 部分正确使用了 “单尾检验”，则确实应当不同~

那么两处不同的原因也很明显了：
这是因为“两处检验的方向性不同”。

对于所有的数值，你应该提供正确的分析结果。

需要修改（一）：
第 II 部分 j 题：

请仔细审题，此处问的是：
在 p_diffs 中，有多大比例大于 ctr_diff ？
对应的是 pnew−pold>0 单尾 备择假设。

目前代码 (p_diffs<ctr_diff).mean()+(p_diffs>(0-ctr_diff)).mean() 并不符合题意，
实际上执行的是 双尾 检验哦…

需要修改（二）：
第 II 部分最后 proportions_ztest 函数调用很不错！

但可惜忽略了检验的方向性，proportions_ztest 默认执行的是双尾检验，
这与前面选定的备择假设 pnew−pold>0 的单尾方向性不符，
导致 0.18988337448195103 的 p 值并不准确哦…

请根据所选择的对立假设方向，以及实际传入函数的前两个参数，
为函数第三个参数 alternative 选择合适的取值 [‘two-sided’, ‘smaller’, ‘larger’]。

z_score, p_value = sm.stats.proportions_ztest(..., alternative='???')

另外，目前的双尾 z 临界值 1.96
也需要改为计算单尾 z 临界值 norm.ppf(1-0.05)。

需要修改（三）：
第 III 部分 g. 和 h. 题：

请注意，g. 和 h. 两题需要拟合两个不同模型。
目前两题只有一个模型，并不够哦…

首先是 g. 题：

请选择合适的变量传入一个单独的模型，
然后根据统计结果回答问题：
国家项对转化有影响吗？

其次是 h. 题：

仅向模型传入交叉项并不够哦：
['intercept','ab_page','new_CA','new_UK']

在传入交叉项时，还需要同时传入其所依赖的全部低阶项。
例如，如果传入 'new_UK'，还需要同时传入 'ab_page' 和 'UK' 哦。

建议同学复习 “多元线性回归” 课程 21 和 22 节 interactions 相关内容~

结论不仅包括统计推理，而且包括实际推理。
